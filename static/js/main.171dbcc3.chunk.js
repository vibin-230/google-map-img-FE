(this.webpackJsonpsnaptrude=this.webpackJsonpsnaptrude||[]).push([[0],{191:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),c=n(81),s=n.n(c),i=(n(191),n(28)),o=n(30),u=n(185),l=n(186),d=n(10),p=function(e){var t=Object(a.useRef)(null),n=e.antialias,r=e.engineOptions,c=e.adaptToDeviceRatio,s=e.sceneOptions,i=e.onRender,p=e.onSceneReady,j=Object(l.a)(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady"]);return Object(a.useEffect)((function(){if(t.current){var a=new o.b(t.current,n,r,c),u=new o.e(a,s);u.isReady()?p(u,e.captureMap):u.onReadyObservable.addOnce((function(t){return p(t,e.captureMap)})),a.runRenderLoop((function(){"function"===typeof i&&i(u),u.render()}));var l=function(){u.getEngine().resize()};return window&&window.addEventListener("resize",l),function(){u.getEngine().dispose(),window&&window.removeEventListener("resize",l)}}}),[t,e.captureMap]),Object(d.jsx)("canvas",Object(u.a)({ref:t},j))},j=n.p+"static/media/venueManager.9d5088c3.png",g=(n(193),function(e,t){var n=new o.a("camera1",-Math.PI/2,Math.PI/2,4,new o.h.Zero(1,1,0),e),a=e.getEngine().getRenderingCanvas();n.attachControl(a,!0),new o.c("light",new o.h(1,-1,-2),e).intensity=1;var r=new o.d.CreateBox("box",{height:1,width:1,depth:.25}),c=new o.f("materialImg",e);c.diffuseTexture=new o.g(t,e),r.material=c}),b=function(e){},O=function(e){return Object(d.jsx)("div",{children:Object(d.jsx)(p,{antialias:!0,onSceneReady:g,captureMap:e.captureMap,onRender:b,id:"my-canvas"})})},h=(n(194),n(177)),m=n.n(h).a.create({baseURL:"https://google-map-img-be.herokuapp.com/"}),f=function(e){return m.get("/v1/getUser?username=".concat(e.username,"&&password=").concat(e.password)).then((function(e){return console.log("product list api",e),e})).catch((function(e){return console.error("create product error",e)}))},v=function(e,t){return m.post("/v1/editPhotos?username=".concat(e),t).then((function(e){return console.log("on edit click api",e),e})).catch((function(e){return console.error("create product error",e),e}))},x=n(178),w=n(179),S=n(184),k=n(183),M=n(180),y=n.n(M),C=n(60),R=(n(412),function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={marker_lat:13.0827,marker_lng:80.2376,img:""},e.onMarkerDragEnd=function(t){var n=t.latLng.lat(),a=t.latLng.lng();e.setState({marker_lat:n,marker_lng:a})},e.captureMapOnClick=function(){y()(document.querySelector("#map-container"),{logging:!0,letterRendering:1,allowTaint:!1,useCORS:!0}).then((function(t){e.props.setCaptureMap(t.toDataURL("image/webp"))}))},e.saveImage=function(t){var n=e.props.loggedInUser.username,a={text:"edit",img:e.props.captureMap};console.log("saveimage clicked"),v(n,a).then((function(t){return e.setState({img:t.data.res.img},(function(){return e.props.setImageUpdated(!e.props.imageUpdated)}))}))},e}return Object(w.a)(n,[{key:"render",value:function(){var e=this,t=Object(C.withScriptjs)(Object(C.withGoogleMap)((function(t){return Object(d.jsx)(C.GoogleMap,{defaultZoom:8,defaultCenter:{lat:e.state.marker_lat,lng:e.state.marker_lng},children:Object(d.jsx)(C.Marker,{draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.marker_lat,lng:e.state.marker_lng}})})})));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{id:"map-container",children:Object(d.jsx)(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAMG_RDX0SnmkWUy7vBSMURe7n15q0q6aA&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(d.jsx)("div",{style:{height:"100%",width:"100%"}}),containerElement:Object(d.jsx)("div",{style:{height:"400px",minWidth:"400px"}}),mapElement:Object(d.jsx)("div",{style:{height:"100%",width:"100%"}})})}),Object(d.jsx)("button",{className:"capture_button",onClick:function(){return e.captureMapOnClick()},children:"Capture"}),Object(d.jsx)("button",{className:"save_button",onClick:function(){return e.saveImage()},children:"Save Image"})]})}}]),n}(a.Component)),_=(n(413),function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(i.a)(s,2),u=o[0],l=o[1],p=Object(a.useState)(!1),j=Object(i.a)(p,2),g=j[0],b=j[1],O=Object(a.useState)(!1),h=Object(i.a)(O,2),v=h[0],x=h[1],w=Object(a.useState)(""),S=Object(i.a)(w,2),k=S[0],M=S[1],y=function(){r.length>2&&k.length>4?(console.log("sign up clicked",r,k),function(e){return m.post("/v1/createUser",e).then((function(e){return e})).catch((function(e){return console.error("create product error",e)}))}({username:r,password:k}).then((function(e){"Success"===e.data.message&&l("created")}))):(r.length<3&&b(!0),k.length<5&&x(!0))};return Object(a.useEffect)((function(){"creted"!==u&&"no_user"!==u||setTimeout((function(){l("")}),700)}),[u]),Object(d.jsxs)("div",{className:"backdrop",children:[Object(d.jsxs)("div",{className:"login_container",children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"User Name"}),Object(d.jsx)("input",{onChange:function(e){c(e.target.value)}})]}),g&&Object(d.jsx)("span",{className:"error",children:"Enter atleast 3 characters"})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"Password"}),Object(d.jsx)("input",{type:"password",onChange:function(e){M(e.target.value)}})]}),v&&Object(d.jsx)("span",{className:"error",children:"Enter atleast 5 characters"})]}),Object(d.jsxs)("div",{className:"login_button_contianer",children:[Object(d.jsx)("button",{onClick:function(){return y()},children:"Sign Up"}),Object(d.jsx)("button",{onClick:function(){return function(){var t={username:r,password:k};console.log("signin",t),f(t).then((function(t){if("Success"===t.data.message){var n={username:t.data.result.username,password:t.data.result.password,img:t.data.result.img};e.setLoggedInUser(n),e.setLoginScreen(!1)}else l("no_user")})).catch((function(e){return console.log("login error",e)}))}()},children:"Sign In"})]})]}),""!==u&&Object(d.jsxs)("div",{className:"success_popup",children:["created"===u&&"USER CREATED, Login to continue","no_user"===u&&"User not found"]})]})}),E=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(a.useState)(),p=Object(i.a)(l,2),g=p[0],b=p[1],h=Object(a.useState)({}),m=Object(i.a)(h,2),v=m[0],x=m[1],w=Object(a.useState)(!0),S=Object(i.a)(w,2),k=S[0],M=S[1],y=Object(a.useState)(j),C=Object(i.a)(y,2),E=C[0],U=C[1];return Object(a.useEffect)((function(){if(!o){var e={username:v.username,password:v.password};f(e).then((function(e){console.log("user data",e),r(e.data.result.username),b(e.data.result.img)}))}}),[k,o]),Object(d.jsx)("div",{className:"app",children:o?Object(d.jsx)(_,{setLoginScreen:u,setLoggedInUser:x}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"map",children:[Object(d.jsx)(R,{loggedInUser:v,setCaptureMap:U,captureMap:E,setImageUpdated:M,imageUpdated:k}),Object(d.jsxs)("div",{className:"details_container",children:[Object(d.jsxs)("span",{children:["User: ",Object(d.jsx)("span",{children:n})," "]}),Object(d.jsxs)("span",{children:[" ","Saved image:"," ",Object(d.jsx)("img",{src:g,alt:"user_map_image",style:{width:"100px",height:"100px"}})]}),Object(d.jsx)("button",{onClick:function(){window.location.reload()},children:"Sign Out"})]})]}),Object(d.jsx)("div",{className:"scene",children:Object(d.jsx)(O,{captureMap:E})})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(E,{})}),document.getElementById("root")),U()}},[[414,1,2]]]);
//# sourceMappingURL=main.171dbcc3.chunk.js.map