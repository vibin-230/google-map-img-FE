(this.webpackJsonpsnaptrude=this.webpackJsonpsnaptrude||[]).push([[0],{192:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},417:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),r=n(81),s=n.n(r),o=(n(192),n(24)),i=(n(193),n(26)),u=n(186),l=n(187),d=n(9),j=function(e){var t=Object(a.useRef)(null),n=e.antialias,c=e.engineOptions,r=e.adaptToDeviceRatio,s=e.sceneOptions,o=e.onRender,j=e.onSceneReady,p=Object(l.a)(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady"]);return Object(a.useEffect)((function(){if(t.current){var a=new i.c(t.current,n,c,r),u=new i.g(a,s);u.isReady()?j(u,e.captureMap,e.onClickRightDialogue):u.onReadyObservable.addOnce((function(t){return j(t,e.captureMap,e.onClickRightDialogue)})),a.runRenderLoop((function(){"function"===typeof o&&o(u),u.render()}));var l=function(){u.getEngine().resize()};return window&&window.addEventListener("resize",l),function(){u.getEngine().dispose(),window&&window.removeEventListener("resize",l)}}}),[t,e.captureMap]),Object(d.jsx)("canvas",Object(u.a)({ref:t},p))},p=n.p+"static/media/venueManager.9d5088c3.png",g=(n(195),function(e,t,n){var a=new i.a("camera1",-Math.PI/2,Math.PI/2,4,new i.j.Zero(1,1,0),e),c=e.getEngine().getRenderingCanvas();e.clearColor=new i.b(.8,.8,.8),e.onPointerObservable.add((function(e){switch(e.type){case i.f.POINTERDOWN:n("")}})),a.attachControl(c,!0),new i.d("light",new i.j(1,-1,-2),e).intensity=1;var r=new i.e.CreateBox("box",{height:1,width:1,depth:.25}),s=new i.h("materialImg",e);s.diffuseTexture=new i.i(t,e),r.material=s}),b=function(e){},O=function(e){return Object(a.useEffect)((function(){!function(e){e.setNoOfBoxes(8)}(e)}),[]),Object(d.jsx)(j,{antialias:!0,onSceneReady:g,setCaptureMap:e.setCaptureMap,captureMap:e.captureMap,onClickRightDialogue:e.onClickRightDialogue,onRender:b,id:"my-canvas"})},m=(n(196),n(178)),h=n.n(m).a.create({baseURL:"https://google-map-img-be.herokuapp.com/"}),f=function(e){return h.get("/v1/getUser?username=".concat(e.username,"&&password=").concat(e.password)).then((function(e){return console.log("product list api",e),e})).catch((function(e){return console.error("create product error",e)}))},x=function(e,t){return h.post("/v1/editPhotos?username=".concat(e),t).then((function(e){return console.log("on edit click api",e),e})).catch((function(e){return console.error("create product error",e),e}))},v=n(179),w=n(180),k=n(185),S=n(184),C=n(181),R=n.n(C),_=n(60),M=(n(414),function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={marker_lat:13.0827,marker_lng:80.2376,img:""},e.onMarkerDragEnd=function(t){var n=t.latLng.lat(),a=t.latLng.lng();e.setState({marker_lat:n,marker_lng:a})},e.captureMapOnClick=function(){R()(document.querySelector("#map-container"),{logging:!0,letterRendering:1,allowTaint:!1,useCORS:!0}).then((function(t){e.props.setCaptureMap(t.toDataURL("image/webp"))}))},e.saveImage=function(t){var n=e.props.loggedInUser.username,a={text:"edit",img:e.props.captureMap};console.log("saveimage clicked"),x(n,a).then((function(t){return e.setState({img:t.data.res.img},(function(){return e.props.setImageUpdated(!e.props.imageUpdated)}))}))},e}return Object(w.a)(n,[{key:"render",value:function(){var e=this,t=Object(_.withScriptjs)(Object(_.withGoogleMap)((function(t){return Object(d.jsx)(_.GoogleMap,{defaultZoom:8,defaultCenter:{lat:e.state.marker_lat,lng:e.state.marker_lng},children:Object(d.jsx)(_.Marker,{draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.marker_lat,lng:e.state.marker_lng}})})})));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{id:"map-container",children:Object(d.jsx)(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAMG_RDX0SnmkWUy7vBSMURe7n15q0q6aA&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(d.jsx)("div",{style:{height:"100%",width:"100%"}}),containerElement:Object(d.jsx)("div",{style:{height:"300px",minWidth:"400px",borderRadius:"8px"}}),mapElement:Object(d.jsx)("div",{style:{height:"100%",width:"100%",borderRadius:"8px"}})})}),Object(d.jsxs)("div",{className:"map_buttons",children:[Object(d.jsx)("button",{className:"capture_button",onClick:function(){return e.captureMapOnClick()},children:"Capture"}),Object(d.jsx)("button",{className:"save_button",onClick:function(){return e.saveImage()},children:"Save Image"})]})]})}}]),n}(a.Component)),E=(n(415),function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],j=Object(a.useState)(!1),p=Object(o.a)(j,2),g=p[0],b=p[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],v=m[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),S=k[0],C=k[1],R=function(){c.length>2&&S.length>4?(console.log("sign up clicked",c,S),function(e){return h.post("/v1/createUser",e).then((function(e){return e})).catch((function(e){return console.error("create product error",e)}))}({username:c,password:S}).then((function(e){"Success"===e.data.message&&l("created")}))):(c.length<3&&b(!0),S.length<5&&v(!0))};return Object(a.useEffect)((function(){"creted"!==u&&"no_user"!==u||setTimeout((function(){l("")}),700)}),[u]),Object(d.jsxs)("div",{className:"backdrop",children:[Object(d.jsxs)("div",{className:"login_container",children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"User Name"}),Object(d.jsx)("input",{onChange:function(e){r(e.target.value)}})]}),g&&Object(d.jsx)("span",{className:"error",children:"Enter atleast 3 characters"})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"Password"}),Object(d.jsx)("input",{type:"password",onChange:function(e){C(e.target.value)}})]}),x&&Object(d.jsx)("span",{className:"error",children:"Enter atleast 5 characters"})]}),Object(d.jsxs)("div",{className:"login_button_contianer",children:[Object(d.jsx)("button",{onClick:function(){return R()},children:"Sign Up"}),Object(d.jsx)("button",{onClick:function(){return function(){var t={username:c,password:S};console.log("signin",t),f(t).then((function(t){if("Success"===t.data.message){var n={username:t.data.result.username,password:t.data.result.password,img:t.data.result.img};e.setLoggedInUser(n),e.setLoginScreen(!1)}else l("no_user")})).catch((function(e){return console.log("login error",e)}))}()},children:"Sign In"})]})]}),""!==u&&Object(d.jsxs)("div",{className:"success_popup",children:["created"===u&&"USER CREATED, Login to continue","no_user"===u&&"User not found"]})]})}),y=(n(416),function(){return Object(d.jsxs)("nav",{children:[Object(d.jsx)("span",{className:"logo",children:"snaptrude"}),Object(d.jsx)("button",{onClick:function(){window.location.reload()},children:"Sign Out"})]})}),N=(n(115),function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),s=Object(o.a)(r,2),i=s[0],u=s[1],l=Object(a.useState)(),j=Object(o.a)(l,2),g=j[0],b=j[1],m=Object(a.useState)({}),h=Object(o.a)(m,2),x=h[0],v=h[1],w=Object(a.useState)(!0),k=Object(o.a)(w,2),S=k[0],C=k[1],R=Object(a.useState)(p),_=Object(o.a)(R,2),N=_[0],U=_[1],I=Object(a.useState)(0),L=Object(o.a)(I,2),D=L[0],T=L[1],F=Object(a.useState)(""),P=Object(o.a)(F,2),B=P[0],A=P[1],z=Object(a.useRef)(null),q=function(e){console.log(z),null===z.current||z.current.contains(e.target)||A("")};Object(a.useEffect)((function(){return document.addEventListener("mousedown",q),function(){return document.removeEventListener("mousedown",q)}})),Object(a.useEffect)((function(){console.log("number of boxes",D)}),[D]),Object(a.useEffect)((function(){if(!i){var e={username:x.username,password:x.password};f(e).then((function(e){console.log("user data",e),c(e.data.result.username),b(e.data.result.img)}))}}),[S,i]);var G=function(e){A(e)};return Object(d.jsx)("div",{className:"app",children:i?Object(d.jsx)(E,{setLoginScreen:u,setLoggedInUser:v}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y,{}),Object(d.jsx)("div",{className:"base_wrapper",children:Object(d.jsxs)("div",{className:"scene",children:[Object(d.jsxs)("div",{className:"right_controls",children:[Object(d.jsx)("span",{style:{border:"map"===B?"1px solid black":"1px solid transparent"},onClick:function(){return G("map")},children:"Map"}),Object(d.jsx)("span",{style:{border:"account"===B?"1px solid black":"1px solid transparent"},onClick:function(){return G("account")},children:"Acc."})]}),"map"===B&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"map_dialogue_box",ref:z,children:Object(d.jsx)("div",{children:Object(d.jsx)(M,{loggedInUser:x,setCaptureMap:U,captureMap:N,setImageUpdated:C,imageUpdated:S})})})}),"account"===B&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"map_dialogue_box",ref:z,children:Object(d.jsxs)("div",{className:"details_container",children:[Object(d.jsxs)("span",{children:["User: ",Object(d.jsx)("span",{children:n})," "]}),Object(d.jsxs)("span",{className:"details_contianer_img",children:[" ","Saved image:"," ",Object(d.jsx)("img",{src:g,alt:"user_map_image",style:{width:"100px",height:"100px"}})]}),Object(d.jsxs)("span",{children:["No of boxes : ",D]})]})})}),Object(d.jsx)("div",{className:"scene_wrapper",children:Object(d.jsx)(O,{captureMap:N,setCaptureMap:U,setNoOfBoxes:T,noOfBoxes:D,onClickRightDialogue:G})})]})})]})})}),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,418)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(N,{})}),document.getElementById("root")),U()}},[[417,1,2]]]);
//# sourceMappingURL=main.e7579af4.chunk.js.map