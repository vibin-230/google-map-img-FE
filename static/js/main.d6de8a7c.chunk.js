(this.webpackJsonpsnaptrude=this.webpackJsonpsnaptrude||[]).push([[0],{193:function(e,t,n){},196:function(e,t,n){},198:function(e,t,n){},416:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),s=n(83),r=n.n(s),o=(n(193),n(15)),i=(n(194),n(26)),u=n(187),l=n(188),d=n(8),p=function(e){var t=Object(a.useRef)(null),n=e.antialias,c=e.engineOptions,s=e.adaptToDeviceRatio,r=e.sceneOptions,o=e.onRender,p=e.onSceneReady,g=Object(l.a)(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady"]);return Object(a.useEffect)((function(){if(t.current){var a=new i.c(t.current,n,c,s),u=new i.g(a,r);u.isReady()?p(u,e.captureMap,e.onClickRightDialogue,e.setSuggestion,e.setText,e.inputTextValue,e.setInputTextValue):u.onReadyObservable.addOnce((function(t){return p(t,e.captureMap,e.onClickRightDialogue,e.setSuggestion,e.setText,e.inputTextValue,e.setInputTextValue)})),a.runRenderLoop((function(){"function"===typeof o&&o(u),u.render()}));var l=function(){u.getEngine().resize()};return window&&window.addEventListener("resize",l),function(){u.getEngine().dispose(),window&&window.removeEventListener("resize",l)}}}),[t,e.captureMap,e.inputTextValue.show]),Object(d.jsx)("canvas",Object(u.a)({ref:t},g))},g=n.p+"static/media/venueManager.9d5088c3.png",j=(n(196),n(61)),b=function(e,t,n,a,c,s,r){var o=new i.a("camera1",-Math.PI/2,Math.PI/2,4,new i.j.Zero(1,1,0),e),u=e.getEngine().getRenderingCanvas();e.clearColor=new i.b(.8,.8,.8);var l=new i.e.CreateBox("box",{height:1,width:1,depth:.25});e.onPointerObservable.add((function(e){switch(e.type){case i.f.POINTERDOWN:n("")}})),o.attachControl(u,!0),new i.d("light",new i.j(1,-1,-2),e).intensity=1,console.log("scene consoele",s);var d=new i.h("materialImg",e);d.diffuseTexture=new i.i(t,e);s.text.length>0&&s.show&&(!function(e){var t=l.clone("outerBox");t.material=d;var n=new j.AdvancedDynamicTexture.CreateForMesh(t),a=new j.TextBlock;a.width="400px",a.height="100px",a.color="white",a.background="grey",a.fontSize="80px",a.top="".concat(45,"%"),a.left="".concat(40,"%"),a.text=e,console.log(a),n.addControl(a),a.linkWithMesh(t)}(s.text),a({show:!1})),l.clone("innerBox").material=d;u.addEventListener("dblclick",(function(){var t,n=e.pick(e.pointerX,e.pointerY,(function(e){return e===l}));n.hit&&(t=n.pickedMesh),t&&(!function(e){var t=new j.AdvancedDynamicTexture.CreateForMesh(l),n=new j.InputText;n.width="400px",n.height="100px",n.color="white",n.background="grey",n.fontSize="80px",n.top="".concat(45,"%"),n.left="".concat(40,"%"),n.onTextChangedObservable.add((function(e){n.text.length>0?(c(n.text),a({show:!0,top:"50vh",left:"50vw"})):(c(""),a({show:!1}))})),n.onTextPasteObservable.add((function(){s.length>0&&(n.text=s)})),console.log(n),t.addControl(n),n.linkWithMesh(l)}(),r({show:!1,text:""}))}))},h=function(e){},f=function(e){return Object(d.jsx)(p,{antialias:!0,onSceneReady:b,setCaptureMap:e.setCaptureMap,captureMap:e.captureMap,onClickRightDialogue:e.onClickRightDialogue,setText:e.setText,inputTextValue:e.inputTextValue,setInputTextValue:e.setInputTextValue,onRender:h,setSuggestion:e.setSuggestion,id:"my-canvas"})},x=(n(198),n(179)),O=n.n(x).a.create({baseURL:"https://google-map-img-be.herokuapp.com/"}),m=function(e){return O.get("/v1/getUser?username=".concat(e.username,"&&password=").concat(e.password)).then((function(e){return console.log("product list api",e),e})).catch((function(e){return console.error("create product error",e)}))},v=function(e,t){return O.post("/v1/editPhotos?username=".concat(e),t).then((function(e){return console.log("on edit click api",e),e})).catch((function(e){return console.error("create product error",e),e}))},w=n(180),k=n(181),S=n(186),C=n(185),y=n(182),M=n.n(y),R=n(62),T=(n(416),function(e){Object(S.a)(n,e);var t=Object(C.a)(n);function n(){var e;Object(w.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={marker_lat:13.0827,marker_lng:80.2376,img:""},e.onMarkerDragEnd=function(t){var n=t.latLng.lat(),a=t.latLng.lng();e.setState({marker_lat:n,marker_lng:a})},e.captureMapOnClick=function(){M()(document.querySelector("#map-container"),{logging:!0,letterRendering:1,allowTaint:!1,useCORS:!0}).then((function(t){e.props.setCaptureMap(t.toDataURL("image/webp"))}))},e.saveImage=function(t){var n=e.props.loggedInUser.username,a={text:"edit",img:e.props.captureMap};console.log("saveimage clicked"),v(n,a).then((function(t){return e.setState({img:t.data.res.img},(function(){return e.props.setImageUpdated(!e.props.imageUpdated)}))}))},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this,t=Object(R.withScriptjs)(Object(R.withGoogleMap)((function(t){return Object(d.jsx)(R.GoogleMap,{defaultZoom:8,defaultCenter:{lat:e.state.marker_lat,lng:e.state.marker_lng},children:Object(d.jsx)(R.Marker,{draggable:!0,onDragEnd:e.onMarkerDragEnd,position:{lat:e.state.marker_lat,lng:e.state.marker_lng}})})})));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{id:"map-container",children:Object(d.jsx)(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAMG_RDX0SnmkWUy7vBSMURe7n15q0q6aA&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(d.jsx)("div",{style:{height:"100%",width:"100%"}}),containerElement:Object(d.jsx)("div",{style:{height:"300px",minWidth:"400px",borderRadius:"8px"}}),mapElement:Object(d.jsx)("div",{style:{height:"100%",width:"100%",borderRadius:"8px"}})})}),Object(d.jsxs)("div",{className:"map_buttons",children:[Object(d.jsx)("button",{className:"capture_button",onClick:function(){return e.captureMapOnClick()},children:"Capture"}),Object(d.jsx)("button",{className:"save_button",onClick:function(){return e.saveImage()},children:"Save Image"})]})]})}}]),n}(a.Component)),_=(n(417),function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),i=Object(o.a)(r,2),u=i[0],l=i[1],p=Object(a.useState)(!1),g=Object(o.a)(p,2),j=g[0],b=g[1],h=Object(a.useState)(!1),f=Object(o.a)(h,2),x=f[0],v=f[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),S=k[0],C=k[1],y=function(){c.length>2&&S.length>4?(console.log("sign up clicked",c,S),function(e){return O.post("/v1/createUser",e).then((function(e){return e})).catch((function(e){return console.error("create product error",e)}))}({username:c,password:S}).then((function(e){"Success"===e.data.message&&l("created")}))):(c.length<3&&b(!0),S.length<5&&v(!0))};return Object(a.useEffect)((function(){"creted"!==u&&"no_user"!==u||setTimeout((function(){l("")}),700)}),[u]),Object(d.jsxs)("div",{className:"backdrop",children:[Object(d.jsxs)("div",{className:"login_container",children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"User Name"}),Object(d.jsx)("input",{onChange:function(e){s(e.target.value)}})]}),j&&Object(d.jsx)("span",{className:"error",children:"Enter atleast 3 characters"})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("span",{children:"Password"}),Object(d.jsx)("input",{type:"password",onChange:function(e){C(e.target.value)}})]}),x&&Object(d.jsx)("span",{className:"error",children:"Enter atleast 5 characters"})]}),Object(d.jsxs)("div",{className:"login_button_contianer",children:[Object(d.jsx)("button",{onClick:function(){return y()},children:"Sign Up"}),Object(d.jsx)("button",{onClick:function(){return function(){var t={username:c,password:S};console.log("signin",t),m(t).then((function(t){if("Success"===t.data.message){var n={username:t.data.result.username,password:t.data.result.password,img:t.data.result.img};e.setLoggedInUser(n),e.setLoginScreen(!1)}else l("no_user")})).catch((function(e){return console.log("login error",e)}))}()},children:"Sign In"})]})]}),""!==u&&Object(d.jsxs)("div",{className:"success_popup",children:["created"===u&&"USER CREATED, Login to continue","no_user"===u&&"User not found"]})]})}),E=(n(418),function(){return Object(d.jsxs)("nav",{children:[Object(d.jsx)("span",{className:"logo",children:"snaptrude"}),Object(d.jsx)("button",{onClick:function(){window.location.reload()},children:"Sign Out"})]})}),N=(n(116),function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!0),r=Object(o.a)(s,2),i=r[0],u=r[1],l=Object(a.useState)(),p=Object(o.a)(l,2),j=p[0],b=p[1],h=Object(a.useState)({}),x=Object(o.a)(h,2),O=x[0],v=x[1],w=Object(a.useState)(!0),k=Object(o.a)(w,2),S=k[0],C=k[1],y=Object(a.useState)(g),M=Object(o.a)(y,2),R=M[0],N=M[1],I=Object(a.useState)(0),U=Object(o.a)(I,2),D=U[0],L=U[1],V=Object(a.useState)(""),F=Object(o.a)(V,2),B=F[0],P=F[1],A=Object(a.useState)({show:!1,text:""}),z=Object(o.a)(A,2),W=z[0],q=z[1],G=Object(a.useState)({show:!1,top:0,left:0}),J=Object(o.a)(G,2),X=J[0],Z=J[1],Y=Object(a.useState)(""),H=Object(o.a)(Y,2),K=H[0],Q=H[1],$=Object(a.useRef)(null),ee=["searching","text","copy","paste","image","pixel","working"],te=function(e){null===$.current||$.current.contains(e.target)||(Q(""),P(""))};Object(a.useEffect)((function(){return document.addEventListener("mousedown",te),function(){return document.removeEventListener("mousedown",te)}})),Object(a.useEffect)((function(){console.log("suggestion",X)}),[X]),Object(a.useEffect)((function(){console.log("number of boxes",D)}),[D]),Object(a.useEffect)((function(){console.log("input t ext value",W)}),[W]),Object(a.useEffect)((function(){if(!i){var e={username:O.username,password:O.password};m(e).then((function(e){console.log("user data",e),c(e.data.result.username),b(e.data.result.img)}))}}),[S,i]);var ne=function(e){Q(e)},ae=ee.filter((function(e){return e.includes(B)}));return Object(d.jsx)("div",{className:"app",children:i?Object(d.jsx)(_,{setLoginScreen:u,setLoggedInUser:v}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(E,{}),Object(d.jsx)("div",{className:"base_wrapper",children:Object(d.jsxs)("div",{className:"scene",children:[Object(d.jsxs)("div",{className:"right_controls",children:[Object(d.jsx)("span",{style:{border:"map"===K?"1px solid black":"1px solid transparent"},onClick:function(){return ne("map")},children:"Map"}),Object(d.jsx)("span",{style:{border:"account"===K?"1px solid black":"1px solid transparent"},onClick:function(){return ne("account")},children:"Acc."})]}),"map"===K&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"map_dialogue_box",ref:$,children:Object(d.jsx)("div",{children:Object(d.jsx)(T,{loggedInUser:O,setCaptureMap:N,captureMap:R,setImageUpdated:C,imageUpdated:S})})})}),"account"===K&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"map_dialogue_box",ref:$,children:Object(d.jsxs)("div",{className:"details_container",children:[Object(d.jsxs)("span",{children:["User: ",Object(d.jsx)("span",{children:n})," "]}),Object(d.jsxs)("span",{className:"details_contianer_img",children:[" ","Saved image:"," ",Object(d.jsx)("img",{src:j,alt:"user_map_image",style:{width:"100px",height:"100px"}})]}),Object(d.jsxs)("span",{children:["No of boxes : ",D]})]})})}),Object(d.jsxs)("div",{className:"scene_wrapper",children:[X.show&&ae.length>0&&Object(d.jsx)("span",{style:{display:"flex",flexDirection:"column",position:"absolute",top:X.top,left:X.left,background:"#ffffff",width:200,padding:"10px",borderRadius:10,boxShadow:"0 3px 10px rgba(0,0,0,0.2)",height:150,overflow:"scroll"},children:ae.map((function(e){return Object(d.jsx)("span",{onClick:function(){q({text:e,show:!0})},style:{background:"#f3f3f3",margin:"10px 0",cursor:"pointer"},children:e})}))}),Object(d.jsx)(f,{captureMap:R,words:ee,setSuggestion:Z,setCaptureMap:N,setNoOfBoxes:L,inputTextValue:W,setInputTextValue:q,setText:P,noOfBoxes:D,onClickRightDialogue:ne})]})]})})]})})}),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,420)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(N,{})}),document.getElementById("root")),I()}},[[419,1,2]]]);
//# sourceMappingURL=main.d6de8a7c.chunk.js.map